#!/bin/bash
#Below ssh public key belongs to jenkins user on Jenkins Slave Node which will ssh to client machine & will be be pasted in /home/ec2-user/.ssh/authorized_keys file on the client. So replace it accordingly as per your current agent which you will use. 

hostnamectl set-hostname testvm-dev

mkdir /tmp/myefs

mount -t nfs4 -o nfsvers=4.1,rsize=1048576,wsize=1048576,hard,timeo=600,retrans=2,noresvport fs-8464da30.efs.us-east-1.amazonaws.com:/ /tmp/myefs

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDB+4/DYRHzt4yqgZs5/MfOoiXMFMqFQpDn8fPKI8xlnlWN21ZwI0TfVvvImmhjQaA9QdjOOrBAM73AJFcAfhJed3HVG+fQzwesOLYTL4je3uRL58/1BMsG/7VTdvGCpLJ1lU7OaJ2NDkPzKJJBDdn7IzFpNUbCWYjqnJhxQKiNCow9W8/dBehWdc0PT4l4xW5FJQH+UkHMN7n45sDlQZG1zB8KRgJUrMJ6CxousegmfgGD0FtXizczA4vOELR48kTlqYze2lyy4bdqgrEvqsJyEH5ZcBJhbJjlG5+heqSC393u5m5mjY/Cysh9JS3nYU9oEB4S7MA06gIpfOjVRgz/ Jenkins agent key" >> /home/ec2-user/.ssh/authorized_keys
